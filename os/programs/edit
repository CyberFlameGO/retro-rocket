max = 100
lines = 0
top = 0
DIM content$, max
PROCload(ARGS$)
PROCdraw
PROCtext
END
DEF PROCdraw
	CLS
	BACKGROUND 4
	COLOUR 15
	CURSOR 1, TERMHEIGHT
	FOR X = 0 TO TERMWIDTH
		PRINT " ";
	NEXT
	CURSOR 2, TERMHEIGHT
	PRINT "^X EXIT"; CHR$(9); "^S SAVE"; CHR$(9); CHR$(9); "^W WHEREIS"; CHR$(9); "^R REPLACE";
	CURSOR 1, 0
	FOR X = 0 TO TERMWIDTH
		PRINT " ";
	NEXT
	CURSOR TERMWIDTH / 2 - 2, 0
	PRINT "EDIT"
	COLOUR 7
	BACKGROUND 0
	CURSOR 1, 2
RETPROC
DEF PROCtext
	CURSOR 1, 2
	FOR l = top TO top + TERMHEIGHT - 2
		IF l < max THEN PRINT LEFT$(content$(l), TERMWIDTH)
	NEXT
RETPROC
DEF PROCload(file$)
	FH = OPENIN(file$)
	IF FH < 0 THEN PROCfail
	lines = 0
	REPEAT
		content$(lines) = READ$(FH)
		lines = lines + 1
		IF lines = max THEN PROCgrow
	UNTIL EOF(FH) = 1
	CLOSE FH
RETPROC
DEF PROCgrow
	max = max + 100
	REDIM content$, max
RETPROC
DEF PROCfail
	PRINT "Could not open file: "; ARGS$
	END
RETPROC
